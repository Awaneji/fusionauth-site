---
layout: doc
title: Custom Theme
description: Using Kickstart to Create a FusionAuth Instance with a Custom Theme.
navcategory: customization
---
:page-liquid:

== Overview

[FusionAuth Kickstartâ„¢](https://fusionauth.io/docs/v1/tech/installation-guide/kickstart) enables you to spin up a reproducible FusionAuth environment using a template file. This guide will walk you through the process of using Kickstart to set up a FusionAuth instance with a custom theme.

Our task is to apply a dark theme in place of the default application theme presented in the [5-minute Docker guide](https://fusionauth.io/docs/v1/tech/getting-started/5-minute-docker). We recommened following the 5 minute docker guide first. This guide will then automate that set up process, and apply a custom theme using Kickstart. 

== Prerequisites

You need to have `Node` and `Docker` installed. These are also prerequisites for the 5-minute guide. More information can be found [here](https://fusionauth.io/docs/v1/tech/getting-started/5-minute-docker#requirements).

== Getting Started

First, let's take a look at the state of the FusionAuth instance created in the 5-minute guide.

Follow the steps in the 5-minute guide, navigate to `Applications`, and edit the application that you created. Go to the `OAuth` tab to examine the settings that you configured in the 5-minute guide.

image::themes/kickstart-theme/app-settings.png[Application settings.,width=1200]

In the 5-minute guide, the `Authorized redirect URLs`, `Logout URL`, `Enabled grants`, and `Require registration` fields were manually entered. We will use Kickstart to automate all of these settings. We will also apply pre-defined `Client Id` and `Client secret` values to make launching the application easier.

Now, navigate to `Users` and manage the user that you set up in the 5-minute guide.

image::themes/kickstart-theme/manageuser.png[Manage user.,width=1200]


In the 5-minute guide, you created both the user and the `FusionAuth` registration by manually filling out the registration form. You then managed that user to manually create the registration to your newly created app. We will automate both of these steps as well.

Finally, navigate to `Customizations > Themes` and preview the `FusionAuth` theme. The application you created in the 5-minute guide uses the `OAuth authorize` and `OAuth logout` screens.

`OAuth authorize` looks like this (don't worry about the FreeMarker exception. That won't show up in the application).

image::themes/kickstart-theme/preview-oauth.png[Preview theme,width=1200]

`OAuth logout` looks like this.

image::themes/kickstart-theme/preview-oauth-logout.png[OAuth logout FusionAuth,width=1200]

We are going to create a dark theme for both of these screens, which will look like this.

![OAuth authorize Dark](https://iili.io/HoxyHVp.png)
![OAuth logout Dark](https://iili.io/HozJu0N.png)

Now that we have our end goal in mind, let's configure the necessary files to make it happen.

== Creating the Files

We need to construct three major components in order to reach our goal. The first is a `css` file, which we will use to define the dark theme shown above. The second is the `kickstart.json` file, which will enable the automatic configuration of all of the settings shown above. The third are the files that are given in the 5-minute guide, which will ultimately build our FusionAuth instance. These files require slight modification, which will be explained later in this tutorial. 

In the section that follows, we will closely examine each of these components and explain how to create them. Feel free to [download the completed files here](https://drive.google.com/uc?export=download&id=10YZReMPviuCXu-_rcCc968whICBbAe8j) and skip to the [Running Kickstart](#Running-Kickstart) section instead.

=== darkTheme.css

The most straightforward way to add a consistent style to your theme is to define a stylesheet in `css`. You can interactively experiment with css within your browser (we assume Google Chrome in this tutorial) to get your application looking exactly how you want.

Let's define one `css` rule together. First, preview (![preview button](https://iili.io/HnD87cb.png)) the `FusionAuth` theme and open up the web inspector by right-clicking and selecting `inspect`. Then, hit the `select element` button ![inspect](https://iili.io/HoT3g7p.png) and click the area of the page that you'd like to style. For example, the `div` element with the class `.panel`

image::themes/kickstart-theme/div-panel-bg.png[Panel background color,width=1200]

This element has a `Background` property with a value of `#FFFFFF`, or pure white.


Let's start defining our dark theme by changing this from white to black. With the element selected, click the `plus` (+) icon and type `background: black`.

image::themes/kickstart-theme/background-black.png[Panel background color,width=1200]

We've just defined our first `css` rule. Copy the text that you generated, including the part that the browser made for you when you clicked the `plus` (+) icon, into a text editor and save it as `darkTheme.css`

```css
.panel{
  background: black
}
```
It doesn't look great yet, but it's a start! Now keep using this process to add rules to your `css` file until you've got a fully defined style that you're happy with. Feel free to simply use [this file](https://drive.google.com/uc?export=download&id=1K5U74CGn8Tmp5VmMJyNteJdV64hzVUOk) for the purposes of this tutorial.

Once you have your `darkTheme.css` file, create a folder called `kickstart` and move your `darkTheme.css` file into it.

=== kickstart.json

This file allows us to automatically configure everything we need for our application from the moment we first launch it.

Create a file called `kickstart.json` in the `kickstart` folder that you just made. Copy the following text into this file.

```JSON
{
  "variables":{
    "apiKey" : "#{UUID()}",
    "themeID" : "#{UUID()}",
    "applicationID" : "404e516b-06b8-49da-9c68-c1cd1928c81d",
    "clientSecret" : "RBLhJrfRsa0-YxVPrn_aZfzIGccWyncdvHvDNTy-Hrs",
    "userID" : "#{UUID()}"
  },
  "apiKeys": [
    {
      "key": "#{apiKey}"
    }
  ],
  "requests":[
    "&{json/createTheme.json}",
    "&{json/updateTheme.json}",
    "&{json/createApplication.json}",
    "&{json/createUser.json}",
    "&{json/registerUser.json}"
  ]
}
```

The file has three sections: `variables`, `apiKeys`, and `requests`.

`variables` defines identifiers for the key components of our FusionAuth instance. `apiKey`, `themeId`, and `userId` are all randomly generated UUIDs. `applicationId` and `clientSecret` are arbitrary values that we will use later on.

`apiKeys` defines the key through which our requests will be executed. At least one `apiKey` is required for every `kickstart.json` file.

`requests` defines the API requests that perform our automations. Here, each request is encased in a separate JSON file, which we need to define separately. To do this, create a subfolder within the `kickstart` folder called `json` and add the following files:

==== createTheme.json

```JSON
{
  "method" : "POST",
  "url" : "api/theme/#{themeID}",
  "body" : {
    "sourceThemeId" : "75a068fd-e94b-451a-9aeb-3ddb9a3b5987",
    "theme" : {
      "name" : "Dark Theme"
    }
  }
}
```

This request creates the dark theme. It uses the `sourceThemeId` attribute to copy everything from the default `FusionAuth` theme, the id of which is always `75a068fd-e94b-451a-9aeb-3ddb9a3b5987`. It also assigns the UUID intialized and contained in the `#{themeID}` variable as this theme's id, by setting it as the resource ID in the path of the URL. 

==== updateTheme.json

```JSON
{
  "method" : "PATCH",
  "url" : "api/theme/#{themeID}",
  "body" : {
    "theme" : {
      "stylesheet" : "@{darkTheme.css}"
    }
  }
}
```

Now that we have created the theme, this request applies our `darkTheme.css` stylesheet to it.

==== createApplication.json

```JSON
{
  "method" : "POST",
  "url" : "/api/application/#{applicationID}",
  "body" : {
    "application":{
      "name" : "Kickstart App",
      "oauthConfiguration" : {
        "authorizedRedirectURLs" : [
          "http://localhost:3000/oauth-redirect"
        ],
        "clientId" : "#{applicationID}",
        "clientSecret" : "#{clientSecret}",
        "logoutURL": "http://localhost:3000/logout",
        "enabledGrants": [
          "authorization_code",
          "refresh_token"
        ],
        "requireRegistration" : "true"
      }
    }
  }
}
```

This request creates the application and configures its OAuth settings as they appear in the 5-minute guide.

==== createUser.json

```JSON
{
  "method": "POST",
  "url": "/api/user/registration/#{userID}",
  "body": {
    "user": {
      "email": "test_user@email.com",
      "password": "1234567890"
    },
    "registration": {
      "applicationId": "#{FUSIONAUTH_APPLICATION_ID}",
      "roles": [
        "admin"
      ]
    }
  }
}
```

This request creates the user and registers it to the default `FusionAuth` application. This is necessary to log in to the admin panel.

==== registerUser.json

```JSON
{
  "method": "POST",
  "url": "/api/user/registration/#{userID}",
  "body": {
    "registration": {
      "applicationId": "#{applicationID}"
    }
  }
}
```

This request adds a registration for the user that we just created to our custom application. This requires a separate request because our initial request used its `registration` field for the default application.

With that, our `kickstart` folder is complete and ready to use. The entire folder can be downloaded [here](https://drive.google.com/uc?export=download&id=1hneoi_cqmwGJ87c-MGpzGuBpbUYHa--7).

=== Files from the 5-minute guide

All that's left is to import and modify the files from the 5-minute guide that let us launch and run our FusionAuth instance.

First, download the docker files.

```bash
curl -o docker-compose.yml https://raw.githubusercontent.com/FusionAuth/fusionauth-containers/master/docker/fusionauth/docker-compose.yml
curl -o .env https://raw.githubusercontent.com/FusionAuth/fusionauth-containers/master/docker/fusionauth/.env
```

In order to enable kickstart to run from this `docker-compose.yml` file, we must make some modifications. They are described in detail at [this link](https://fusionauth.io/docs/v1/tech/installation-guide/docker#kickstart) and copied here for your convenience:

- In the `volumes:` section of the fusionauth service, add `- ./kickstart:/usr/local/fusionauth/kickstart.`

- Modify `.env` and add the Kickstart configuration variable: `FUSIONAUTH_APP_KICKSTART_FILE=/usr/local/fusionauth/kickstart/kickstart.json`. This path should be what the Docker container expects, not the path on the host.

- Configure `docker-compose.yml` to pass the environment variable set by `.env` to the container. Do this by adding `FUSIONAUTH_APP_KICKSTART_FILE: ${FUSIONAUTH_APP_KICKSTART_FILE}` to the `environment` section of the fusionauth service.

Now, download the 5-minute guide files.

```bash
git clone https://github.com/FusionAuth/fusionauth-example-5-minute-guide \
&& cd fusionauth-example-5-minute-guide
```

This folder contains a file called `.env.sample`

```env
CLIENT_ID=CHANGEME
CLIENT_SECRET=CHANGEME
BASE_URL=http://localhost:9011
```

Change the `CLIENT_ID` and `CLIENT_SECRET` so that they match the `applicationId` and `clientSecret` variables from your `kickstart.json` file. Then save the file as `.env`

```env
CLIENT_ID=404e516b-06b8-49da-9c68-c1cd1928c81d
CLIENT_SECRET=RBLhJrfRsa0-YxVPrn_aZfzIGccWyncdvHvDNTy-Hrs
BASE_URL=http://localhost:9011
```

The files mentioned in this section, along with all required modifications, can be found [here](https://drive.google.com/uc?export=download&id=1s-lYrIw-uMstUN4cxd9P1zvyBxUoSjvK)

== Running Kickstart

Once all the above steps have been completed, you should have a folder that is structured as follows. We call this folder `Kickstart_Theme`, but you can call it whatever you like.

```
+Kickstart_Theme
|
+--docker-compose.yml
|
+--fusionauth-example-5-minute-guide
|
+--+kickstart
   |
   +--kickstart.json
   |
   +--darkTheme.css
   |
   +--+json
      |
      +--createTheme.json
      |
      +--updateTheme.json
      |
      +--createUser.json
      |
      +--registerUser.json
      |
      +--createApplication.json
```

To launch the FusionAuth instance, navigate to the `Kickstart_Theme` folder and run the docker compose file.

```bash
docker-compose up
```

Once the execution has finished, you can launch the newly created FusionAuth instance at `http://localhost:9011`

You then need to log in to the FusionAuth instance. The username and password are configured in `kickstart/json/createUser.json`. You can set them to be anything you like, but for the purposes of this tutorial, they are defined as follows:

```JSON
"email": "test_user@email.com",
"password": "1234567890"
```

Enter these credentials into the login screen to be taken to the admin view.

You can look at `Applications`, `Users`, and `Customizations > Themes` to verify that all of the settings have been configured correctly.

Before we can see our custom theme in action, we need to apply it to the application.

== Applying the Theme

In order to apply our custom theme, we need to bind it to the Default tenant. Since the Default tenant is created automatically with a random UUID every time, programmatically modifying it is outside the scope of this tutorial.

To manually set the theme of the Default tenant, first navigate to `Tenants` and then click the `edit` button.

![tenants page](https://iili.io/HnDWahG.png)

Then, in the `Theme` panel, select `Dark Theme`. Then click `save`.

![set the theme](https://iili.io/HnDsViQ.png)

== Running the Application

Now that everything is set up and our theme has been applied, we can run the application. Navigate to the `fusionauth-example-5-minute-guide` and use `npm` to start the application.

```bash
npm start
```

Now, open an incognito window and visit `http://localhost:3000`.

You will be taken to the same landing page that you saw in the 5-minute guide. This time, however, when you click `Login`, you will see your custom theme applied to the `OAuth authorize` page.

![voila](https://iili.io/HoACx1t.png)

Enter the same credentials you used to log into the admin view and click `Logout` to see the `OAuth logout` page.

![voilogout](https://iili.io/HoACyuf.png)

== Modifying the Default Messages

Let's take it one step further and assume we want to change the content of some of the messages on the OAuth pages. For example, consider the `forgot-your-password` message, which shows up on the `OAuth authorize` page.

![forgot](https://iili.io/HoA1wEF.png)

Let's say we want to change this to instead say "Forgot your password? Click here." We can do this by adding a `defaultMessages` property to `json/updateTheme.json`.

The `defaultMessages` string requires at all of the messages defined in the FusionAuth default shipped messages file to be present, as it updates all message as a single unit. The easiest way to accomplish this is to create a new file called `defaultMessages.txt` in your `kickstart` folder and copy-paste these messages into it.

The messages can be accessed from by editing (![edit button](https://iili.io/HoxwatV.png)) your custom theme, navigating to the `messages` page, and clicking the edit(![edit button](https://iili.io/HoxwatV.png)) button.

![editTheme](https://iili.io/HoAWTVp.png)
![editTheme2](https://iili.io/HoAh3a1.png)

Copy the entire contents of that box into your `defaultMessages.txt` file, find the `forgot-your-password` message (line 65), and modify it to "Forgot your password? Click here."

```JSON
{
  "method" : "PATCH",
  "url" : "api/theme/#{themeID}",
  "body" : {
    "theme" : {
      "stylesheet" : "@{darkTheme.css}",
      "defaultMessages" : "@{defaultMessages.txt}"
    }
  }
}
````

Once you have modified `updateTheme.json`, run the application again to see the result.

![theResult](https://iili.io/HoAN4R9.png)

== Conclusion

You have used Kickstart to launch a reproducible FusionAuth instance with a custom theme. The complete set of files for this project can be found [here](https://drive.google.com/uc?export=download&id=10YZReMPviuCXu-_rcCc968whICBbAe8j).

Some suggestions for further reading are as follows:

- [General documentation on Themes](https://fusionauth.io/docs/v1/tech/themes/)
- [API-specific documentation on Themes](https://fusionauth.io/docs/v1/tech/apis/themes)
