---
layout: doc
title: Okta OpenID Connect
description: Login using Okta as an OpenID Connect Identity Provider
navcategory: login-methods
---

:sectnumlevels: 0

== Prerequisites
* A FusionAuth instance running on a publicly accessible URL. You can spin up a link:/pricing[basic FusionAuth Cloud instance] or link:/docs/v1/tech/installation-guide/[install it on any server].
* An link:<todo>[Okta account] connected to a business email address.
** The link:<todo>[Okta Verify app] if your Okta account is not configured to send SMS messages for 2FA.

== Okta Configuration

Login to Okta and navigate to the `Admin` panel

image::identity-providers/okta/okta-idp-admin-button.png

Navigate to [breadcrumb]#Applications -> Applications# and click the [field]#Create App Integration# button.

image::identity-providers/okta/okta-idp-create-app-integration.png

Select [field]#OIDC - OpenID Connect# and [field]#Web Application#.

image::identity-providers/okta/okta-idp-oidc-webapp.png

Enter an [field]#App integration name# and ensure that [field]#Authorization code# is checked. Then, supply a [field]#sign-in redirect URI# of the form `+<YOUR_FUSIONAUTH_URL>/oauth2/callback+`, where YOUR_FUSIONAUTH_URL is whatever appears in the address bar when you enter your FusionAuth Dashboard. For example, `+https://local.fusionauth.io+`

image::identity-providers/okta/okta-idp-name-uri.png

Under [breadcrumb]#Assignments#, select [field]#Skip group assignment for now#. Hit `+Save+`.

image::identity-providers/okta/okta-idp-skip-group.png

Copy the [field]#Client ID# and [field]#Secret# into a text file for later use. 

image::identity-providers/okta/okta-idp-client-id-secret.png

Under [breadcrumb]#Sign On#, edit the [breadcrumb]#OpenID Connect ID Token# and change the [field]#Issuer# to use the `+Okta URL+`. Hit `+Save+` and copy this URL into a text file as well.

image::identity-providers/okta/okta-idp-issuer.png

Navigate to [breadcrumb]#Directory -> People# and click on the username of the user that you'd like to authenticate. Then click `+Assign Applications+` and hit the `+Assign+` button next to the one you created. Then click `+Save and Go Back+` and `+Done+`.

== Configure a New FusionAuth OpenID Connect Identity Provider

There is no pre-configured Identity Provider for Okta in FusionAuth. The generic "OpenID" Identity Provider can be used though, as Okta supports the standard OpenId Connect protocols.

Navigate to your FusionAuth instance. Select [breadcrumb]#Settings# from the sidebar and then [breadcrumb]#Identity Providers#.

Select "Add OpenID Connect" from the "Add" dropdown at the top right of the page.

image::identity-providers/cognito/cognito-choose-openid.png[Create a new OpenID integration, width=1200, role=bottom-cropped]

- Provide a [field]#Name#, like `Okta`.
- Set [field]#Client Id# to the `Client Id` recorded when creating the app integration on Okta.
- Select `HTTP Basic Authentication` for the [field]#Client Authentication# field.
- Set the [field]#Client secret# to the client secret recorded when creating the app integration on Okta.
- Enable [field]#Discover endpoints#.
- Use the Okta URL that you recorded as the [field]#Issuer# URL.
- For the [field]#Scope#, type in `+openid email+`
- Optionally, change the [field]#Button Text# field to `+Login with Okta+`

image::identity-providers/okta/okta-idp-settings-identity-provider.png

- In the [breadcrumb]#Applications# section, ensure that the application that you are adding Okta authentication to has the [field]#Enabled# and [field]#Create Registration# switches toggled. Hit `+Save+`.

== Testing the Login

To test, navigate to the applications page in FusionAuth. Click on the [breadcrumb]#View# icon (magnifying glass) next to the application you enabled Okta login on and copy the `OAuth IdP login URL` address. Navigate to this address. You should see a `Login with Okta` option on your app's sign-in page:

image::identity-providers/okta/okta-idp-result.png

Click the `Login with Okta` button. Test logging in with the username and password, as well as the 2FA method selected when configuring your account on Okta.

If it is all set up correctly, you should be redirected back to your app, successfully logged in. The user will be added to FusionAuth, and you can examine the [breadcrumb]#Linked accounts# section of the user details screen to see that the Okta OIDC link was created.
